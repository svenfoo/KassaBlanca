-if @query
  %h1= "Tickets matching '#{@query}'"
-else
  %h1 All Tickets

.jumbotron
  = form_tag(tickets_path,method: :get) do
    .row
      .col-md-9
        .form-group
          %input.form-control{ name: 'query', type: "text", placeholder: 'Search for anything' }
      .col-md-1
        %button.btn.btn-lg.btn-default{ type: "submit" }
          Search
  -if @query
    =link_to "Clear query and show all tickets", tickets_path

%table.table.table-striped
  %thead
    %tr
      %th ID
      %th Name
      %th Email
      %th Checked In
      %th
  -@tickets.each do |ticket|
    %tr
      %th=ticket.id
      %td=ticket.pseudonym || ticket.name
      %td=ticket.email
      %td
        -if ticket.checked_in_at
          %span.glyphicon.glyphicon-ok
      %td
        =link_to "Details", ticket

%h4= "#{number_of_tickets_checked_in} checked in (#{number_of_tickets_checked_in_today} checked in today)"
